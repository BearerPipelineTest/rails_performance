<div class="card">
  <div class="card-content">
    <h2 class="subtitle">Requests (path, total number, average response time)</h2>
    <table class="table is-fullwidth is-hoverable is-narrow">
      <thead>
        <tr>
          <th colspan='3'>Name</th>
          <th colspan='3'>Average</th>
          <th colspan='3'>Slowest</th>
        </tr>
        <tr>
          <th>Controller#Action</th>
          <th>Format</th>
          <th>Requests</th>
          <th>Duration</th>
          <th>Views</th>
          <th>DB</th>
          <th>Duration</th>
          <th>Views</th>
          <th>DB</th>
        </tr>
      </thead>
      <tbody>
        <% @data.each do |e| %>
          <% groups = e[:group].split("|") %>
          <% c, a = groups[0].split("#") %>
          <tr>
            <td>
              <%= statistics_link groups[0], @report, e[:group] %>
              <%= link_to rails_performance.rails_performance_breakdown_path(controller_eq: c, action_eq: a), class: 'stats_icon', target: '_blank' do %>
                <%= icon("stat") %>
              <% end %>
            </td>
            <td><%= statistics_link groups[1]&.upcase, @report, e[:group] %></td>
            <td><%= e[:count] %></td>
            <td><%= ms e[:duration_average] %></td>
            <td><%= ms e[:view_runtime_average] %></td>
            <td><%= ms e[:db_runtime_average] %></td>
            <td><%= ms e[:duration_slowest] %></td>
            <td><%= ms e[:view_runtime_slowest] %></td>
            <td><%= ms e[:db_runtime_slowest] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
